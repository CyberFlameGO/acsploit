# TODO: Fix weighted, undirected graph

class fleury():

    options = {
        'directed': False,
        'weighted': False,
        'n_inputs': 10}
    descriptions = {
        'directed': 'True or False.',
        'weighted': 'True or False',
        'n_inputs': 'Number of nodes in graph.'}

    def run(self, generator):
        directed = False
        if isinstance(self.options['directed'], bool) and self.options['directed']:
            directed = True
        if isinstance(self.options['directed'], str) and self.options['directed'].lower() == 'true':
            directed = True
        print self.exploit(generator, int(self.options['n_inputs']), directed)

    def exploit(self, generator, n_inputs, directed):
        G = {}
        possible_nodes = []
        n = generator.get_min_value()
        for i in range(n_inputs):
            possible_nodes.append(n)
            G[n] = set()
            n = generator.get_greater_than(n)
        for i in range(n_inputs):
            for n in range(n_inputs):
                if not directed:
                    if possible_nodes[i] not in G[possible_nodes[n]]:
                        G[possible_nodes[i]].add(possible_nodes[n])
                else:
                    G[possible_nodes[i]].add(possible_nodes[n])
        formatted_output = ''
        for node in G:
            formatted_output += (str(node) + ': ')
            first = True
            for connection in G[node]:
                if first:
                    formatted_output += str(connection)
                    first = False
                else:
                    formatted_output += (', ' + str(connection))
            formatted_output += '\n'
        G = formatted_output

        return G
