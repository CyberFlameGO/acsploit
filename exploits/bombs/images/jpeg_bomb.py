from options import Options
import os

options = Options()
options.add_option('size', '10', 'Size of decompressed JPEG in KB', ['10', '20', '30', '40', '50', '60'])
options.add_option('color', 'gray', 'color scale', ['gray', 'rgb'])

DESCRIPTION = 'Produces JPEG compression bomb for given size and color scale. Bombs created by bombs.codes'
NO_INPUT = True
DEFAULT_OUTPUT = 'file'
DEFAULT_OUTPUT_OPTIONS = {
	'final_newline': False,
	'format': 'binary'
}


def run(output):
	size = options['size']
	color = options['color']

	with open(os.path.join(os.path.dirname(os.path.realpath(__file__)), "jpeg_bombs", color, size + "K.jpeg"), "rb") as f:
		output.output([f.read()])
